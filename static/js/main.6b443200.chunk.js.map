{"version":3,"sources":["types/WeatherListItem.ts","apis/send.ts","apis/WeatherService.ts","context/navbarContext.ts","context/darkModeContext.ts","context/fetchingContext.ts","context/weatherDataContext.ts","components/Error.tsx","components/Loader.tsx","hoc/withData.tsx","components/Chart.tsx","components/DayPage.tsx","components/Header.tsx","components/Navbar.tsx","components/WeatherItem.tsx","components/WeatherList.tsx","components/App.tsx","index.tsx"],"names":["WeatherListItem","dayObj","dtText","day","hours","icon","description","temp","humidity","pressure","dt","weather","this","dt_txt","Date","getWeekDay","getHours","Math","round","main","WEEK_DAYS","getDay","toString","length","guid","reqid","page","additional","counters","_inited","_indexes","_countersBatchData","_counterTimerId","counterUrl","name","additionalParams","Object","assign","value","clearTimeout","counterData","counterId","requestId","index","self","push","setTimeout","sendBatchRequest","console","warn","data","JSON","stringify","navigator","sendBeacon","Blob","type","xhr","XMLHttpRequest","open","send","String","random","substr","WeatherService","query","fetch","BASE_URL","res","ok","counter","increase","json","weatherData","status","Error","list","days","i","ceil","slice","weatherList","map","city","isDummyData","log","weatherDataJSON","validateData","fetchWeather","lat","lon","NavbarContext","React","createContext","DarkModeContext","FetchingContext","WeatherDataContext","message","Alert","style","borderRadius","severity","AlertTitle","useStyles","makeStyles","wrapper","display","justifyContent","alignItems","paddingTop","Loader","classes","className","CircularProgress","withData","Child","props","useContext","error","isLoading","other","isError","am4core","am4themes_animated","root","width","height","paper","padding","marginTop","Chart","useTheme","palette","background","text","useEffect","chart","am4charts","dateAxis","xAxes","renderer","grid","template","location","tooltip","fill","primary","strokeWidth","label","default","stroke","labels","valueAxis","yAxes","disabled","minWidth","series","dataFields","dateX","valueY","tooltipText","cursor","behavior","dispose","Paper","id","theme","position","marginRight","top","right","center","image","backgroundColor","light","container","spacing","paddingBottom","cardHeader","flexWrap","paddingRight","endAnimation","closeNavbar","useParams","parseInt","undefined","to","Container","Typography","variant","component","Grid","item","src","alt","flexGrow","menuButton","search","shape","fade","common","white","breakpoints","up","marginLeft","searchIcon","pointerEvents","inputRoot","color","inputInput","paddingLeft","transition","transitions","create","Header","useState","cityName","setCityName","currentPlace","setWeatherByCityName","toggleNavbar","AppBar","Toolbar","IconButton","edge","aria-label","onClick","Menu","Search","onSubmit","InputBase","onChange","e","target","placeholder","input","inputProps","content","homeBtn","flex","btnGroup","switchContainer","action","hover","switchInfo","switchBtn","BottomNavigation","bottom","left","BottomNavigationAction","Navbar","history","useHistory","isOpen","isDarkMode","toggleDarkMode","Drawer","onClose","ButtonGroup","Button","event","startIcon","HomeOutlined","Close","Divider","FormControlLabel","checked","NightsStayOutlined","WbSunnyOutlined","control","Switch","rel","href","Mail","GitHub","Telegram","marginBottom","opacity","isAnimationEnds","animation","animationDelay","weatherIconWrapper","weatherIcon","fontWeight","transform","title","down","fontSize","gridContainer","lineHeight","WeatherItem","Card","CardActionArea","CardContent","enterSiteTime","now","window","addEventListener","getCounterValue","App","setIsOpen","setIsDarkMode","setWeatherData","setIsLoading","setIsAnimationEnds","setError","geolocation","getCurrentPosition","coords","fetchWeatherByCoords","latitude","longitude","then","catch","catchWeatherAPIError","finally","catchPositionError","onError","err","code","useMemo","createMuiTheme","ThemeProvider","Provider","key","prevState","preventDefault","document","querySelector","blur","fetchWeatherByCityName","CssBaseline","path","WeatherList","exact","DayPage","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.6b443200.chunk.js","sourcesContent":["import { IWeatherListItem } from './'\r\n\r\nexport default class WeatherListItem implements IWeatherListItem {\r\n    static WEEK_DAYS = ['Воскресенье', 'Понедельник', 'Вторник', 'Среда', 'Четверг', 'Пятница', 'Суббота']\r\n    dtText: string\r\n    day: string\r\n    hours: string\r\n    icon: string\r\n    description: string\r\n    temp: number\r\n    humidity: number\r\n    pressure: number\r\n    dt: Date\r\n\r\n    constructor(dayObj: any) {\r\n        const { icon, description } = dayObj.weather[0]\r\n\r\n        this.dtText = dayObj.dt_txt\r\n        this.dt = new Date(dayObj.dt_txt)\r\n        this.day = this.getWeekDay(this.dt)\r\n        this.hours = this.getHours(this.dt)\r\n        this.icon = icon\r\n        this.description = description\r\n        this.temp = Math.round(dayObj.main.temp)\r\n        this.humidity = dayObj.main.humidity\r\n        this.pressure = dayObj.main.pressure\r\n    }\r\n\r\n    private getWeekDay(dt: Date): string {\r\n        return WeatherListItem.WEEK_DAYS[dt.getDay()]\r\n    }\r\n\r\n    private getHours(dt: Date): string {\r\n        let hours = dt.getHours().toString()\r\n\r\n        if (hours.length < 2) {\r\n            hours = `0${hours}`\r\n        }\r\n\r\n        return hours + ':00'\r\n    }\r\n}","// @ts-nocheck\r\n\r\n/**\r\n * Лимит на число счетчиков в одном запросе\r\n *\r\n * @type {Number}\r\n */\r\nvar MAX_BATCH_COUNTERS = 42;\r\n\r\n/**\r\n * Интервал в миллисекундах, в течение которого счётчики склеиваются\r\n *\r\n * @type {Number}\r\n */\r\nvar COUNTERS_BATCH_TIMEOUT = 15;\r\n\r\nconst API_KEY = '88102c53-842f-4ee0-bdcb-eab697e6bd25'\r\nconst PAGE_NAME = 'Страница просмотра погоды'\r\n\r\ninterface ObjectShape {\r\n    [fieldName: string]: any\r\n}\r\n\r\nexport class Counter {\r\n    guid = '';\r\n    reqid = '';\r\n    page = '';\r\n    additional = {};\r\n    counters: ObjectShape = {}\r\n    private _inited = false;\r\n    private _indexes = {};\r\n    private _countersBatchData = [];\r\n    private _counterTimerId = null;\r\n    private counterUrl = 'https://shri.yandex/hw/stat/send';\r\n\r\n    constructor(guid: string, reqid: string, page: string) {\r\n        if (guid && reqid && page) {\r\n            this.guid = guid;\r\n            this.reqid = reqid;\r\n            this.page = page;\r\n\r\n            this._inited = true;\r\n        }\r\n    }\r\n\r\n    increase(name: string) {\r\n        if (!this.counters[name]) {\r\n            this.counters[name] = 0\r\n        }\r\n\r\n        this.counters[name] += 1\r\n    }\r\n\r\n    getCounterValue(name: string) {\r\n        return this.counters[name] || 0\r\n    }\r\n\r\n    setAdditionalParams(additionalParams: ObjectShape) {\r\n        this.additional = Object.assign({}, additionalParams);\r\n    }\r\n\r\n    /**\r\n     * Отправка счётчика. Основной транспорт - sendBeacon, запасной - XMLHttpRequest. Быстро поступающие одиночные события\r\n     * накапливаются и отправляются пачками по MAX_BATCH_COUNTERS штук.\r\n     *\r\n     * @param {String} name\r\n     * @param {Number} value\r\n     */\r\n    send(name: string | number, value: any) {\r\n        if (!this._inited) {\r\n            console.warn('counter is not inited');\r\n\r\n            return;\r\n        }\r\n\r\n        clearTimeout(this._counterTimerId);\r\n\r\n        if (!this._indexes[name]) {\r\n            this._indexes[name] = 0;\r\n        }\r\n\r\n        var counterData = {\r\n            counterId: this.guid,\r\n            requestId: this.reqid,\r\n            page: this.page,\r\n            name: name,\r\n            value: value,\r\n            index: this._indexes[name],\r\n            additional: this.additional\r\n        },\r\n            self = this;\r\n\r\n        this._countersBatchData.push(counterData);\r\n\r\n        this._indexes[name]++;\r\n\r\n        if (this._countersBatchData.length < MAX_BATCH_COUNTERS) {\r\n            this._counterTimerId = setTimeout(function () {\r\n                self.sendBatchRequest();\r\n            }, COUNTERS_BATCH_TIMEOUT);\r\n        } else {\r\n            self.sendBatchRequest();\r\n        }\r\n    }\r\n\r\n    private sendBatchRequest() {\r\n        var data = JSON.stringify(this._countersBatchData);\r\n\r\n        this._countersBatchData = [];\r\n        this._counterTimerId = null;\r\n\r\n        var sendBeaconPostAvailable = navigator.sendBeacon,\r\n            sendBeaconResult = sendBeaconPostAvailable && navigator.sendBeacon(this.counterUrl, new Blob([data], { type: 'application/json' }));\r\n\r\n        if (!sendBeaconResult) {\r\n            var xhr = new XMLHttpRequest();\r\n            xhr.open('POST', this.counterUrl);\r\n            xhr.send(data);\r\n        }\r\n    }\r\n}\r\n\r\nexport default new Counter(\r\n    API_KEY,\r\n    String(Math.random()).substr(2, 12),\r\n    PAGE_NAME\r\n)","import { WeatherListItem, IWeatherData } from '../types'\r\nimport counter from './send'\r\nimport weatherDataJSON from './weatherData.json'\r\n\r\nclass WeatherService {\r\n    private static BASE_URL: string = 'https://api.openweathermap.org/data/2.5/forecast?lang=ru&units=metric&appid=5b7c2d94dfe2f4c130db1821aec8f1f9&'\r\n    private static isDummyData = false\r\n\r\n    private static async fetchWeather(query: string) {\r\n        const res = await fetch(this.BASE_URL + query)\r\n\r\n        if (res.ok) {\r\n            counter.increase('количество просмотренных прогнозов погоды')\r\n            const weatherData = await res.json()\r\n            return weatherData\r\n        }\r\n\r\n        switch (res.status) {\r\n            case 404: throw new Error('404')\r\n            case 429: throw new Error('429')\r\n            default: throw new Error()\r\n        }\r\n    }\r\n\r\n    private static validateData(data: any): IWeatherData {\r\n        const { list } = data\r\n\r\n        const size = 8\r\n        const days = []\r\n        for (let i = 0; i < Math.ceil(list.length / size); i++) {\r\n            days[i] = list.slice((i * size), (i * size) + size)\r\n        }\r\n\r\n        return {\r\n            weatherList: days.map(day => {\r\n                return day.map((dayObj: any) => new WeatherListItem(dayObj))\r\n            }),\r\n            name: data.city.name\r\n        }\r\n    }\r\n\r\n    public static async fetchWeatherByCityName(city: string) {\r\n        if (this.isDummyData) {\r\n            console.log(weatherDataJSON)\r\n            return this.validateData(weatherDataJSON)\r\n        }\r\n        const data = await this.fetchWeather(`q=${city}`)\r\n        return this.validateData(data)\r\n    }\r\n\r\n    public static async fetchWeatherByCoords(lat: string | number, lon: string | number) {\r\n        if (this.isDummyData) {\r\n            console.log(weatherDataJSON)\r\n            return this.validateData(weatherDataJSON)\r\n        }\r\n        const data = await this.fetchWeather(`lat=${lat}&lon=${lon}`)\r\n        return this.validateData(data)\r\n    }\r\n}\r\n\r\nexport default WeatherService","import React from 'react'\r\nimport { INavbarContext } from '../types/context'\r\n\r\nexport const NavbarContext = React.createContext<Partial<INavbarContext>>({})","import React from 'react'\r\nimport { IDarkModeContext } from '../types/context'\r\n\r\nexport const DarkModeContext = React.createContext<Partial<IDarkModeContext>>({})","import React from 'react'\r\nimport { IFetchingContext } from '../types/context'\r\n\r\nexport const FetchingContext = React.createContext<Partial<IFetchingContext>>({})","import React from 'react'\r\nimport { IWeatherDataContext } from '../types/context'\r\n\r\nexport const WeatherDataContext = React.createContext<Partial<IWeatherDataContext>>({})\r\n","import React from 'react'\r\nimport { Alert, AlertTitle } from '@material-ui/lab';\r\n\r\ntype Props = {\r\n    message: string\r\n}\r\n\r\nconst Error: React.FC<Props> = ({ message }) => {\r\n    return (\r\n        <Alert style={{ borderRadius: 0 }} severity=\"error\">\r\n            <AlertTitle>Ошибка</AlertTitle>\r\n            {message}\r\n        </Alert>\r\n    )\r\n}\r\n\r\nexport default Error","import React from 'react'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport { CircularProgress } from '@material-ui/core'\r\n\r\nconst useStyles = makeStyles({\r\n    wrapper: {\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        paddingTop: '35vh'\r\n    }\r\n})\r\n\r\ntype Props = {\r\n    style?: React.CSSProperties\r\n}\r\n\r\nconst Loader: React.FC<Props> = ({ style }) => {\r\n    const classes = useStyles()\r\n\r\n    return (\r\n        <div style={style} className={classes.wrapper}>\r\n            <CircularProgress />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Loader","import React, { useContext } from 'react'\r\n\r\nimport { FetchingContext } from '../context'\r\n\r\nimport Error from '../components/Error'\r\nimport Loader from '../components/Loader'\r\n\r\ntype Props = {\r\n    style?: React.CSSProperties\r\n}\r\n\r\nconst withData = <P extends Object>(Child: React.ComponentType<P>): React.FC<P & Props> => (props) => {\r\n    const { error, isLoading } = useContext(FetchingContext)\r\n    const { style, ...other } = props\r\n\r\n    if (error!.isError) {\r\n        return <Error message={error!.message} />\r\n    }\r\n\r\n    if (isLoading) {\r\n        return <Loader style={style} />\r\n    }\r\n\r\n    return <Child {...other as P} />\r\n}\r\n\r\nexport default withData","import React, { useEffect } from 'react'\r\nimport am4themes_animated from \"@amcharts/amcharts4/themes/animated\"\r\nimport { makeStyles, Paper, useTheme } from '@material-ui/core'\r\nimport * as am4core from '@amcharts/amcharts4/core'\r\nimport * as am4charts from '@amcharts/amcharts4/charts'\r\nimport { IWeatherListItem } from '../types'\r\n\r\nam4core.useTheme(am4themes_animated)\r\n\r\nconst useStyles = makeStyles({\r\n    root: {\r\n        width: '100%',\r\n        height: '45vh'\r\n    },\r\n    paper: {\r\n        padding: '1.5rem 1rem 1rem 1rem',\r\n        marginTop: '0.5rem'\r\n    }\r\n})\r\n\r\ntype Props = {\r\n    weatherList: IWeatherListItem[]\r\n}\r\n\r\nconst Chart: React.FC<Props> = ({ weatherList }) => {\r\n    const { palette: { background, text, type } } = useTheme()\r\n    const classes = useStyles()\r\n\r\n    useEffect(() => {\r\n\r\n        const chart = am4core.create('chart', am4charts.XYChart)\r\n        chart.data = weatherList\r\n\r\n        const dateAxis = chart.xAxes.push(new am4charts.DateAxis())\r\n        dateAxis.renderer.grid.template.location = 0\r\n        dateAxis.tooltip!.background.fill = am4core.color(text.primary)\r\n        dateAxis.tooltip!.background.strokeWidth = 0\r\n        dateAxis.tooltip!.label.fill = am4core.color(background.default)\r\n        dateAxis.renderer.grid.template.stroke = am4core.color(text.primary)\r\n        dateAxis.renderer.labels.template.fill = am4core.color(text.primary)\r\n\r\n        const valueAxis = chart.yAxes.push(new am4charts.ValueAxis())\r\n        valueAxis!.tooltip!.disabled = true\r\n        valueAxis.renderer.minWidth = 35\r\n        valueAxis.renderer.grid.template.stroke = am4core.color(text.primary)\r\n        valueAxis.renderer.labels.template.fill = am4core.color(text.primary)\r\n\r\n        const series = chart.series.push(new am4charts.LineSeries())\r\n        series.dataFields.dateX = 'dt'\r\n        series.dataFields.valueY = 'temp'\r\n        series.tooltipText = '{valueY.value}'\r\n        if (type === 'dark') {\r\n            series.stroke = am4core.color('#fff')\r\n        }\r\n\r\n        chart.cursor = new am4charts.XYCursor()\r\n        chart.cursor.behavior = 'none';\r\n        return () => {\r\n            chart.dispose()\r\n        }\r\n\r\n    }, [type, weatherList])\r\n\r\n    return (\r\n        <Paper className={classes.paper}>\r\n            <div id=\"chart\" className={classes.root}></div>\r\n        </Paper>\r\n    )\r\n}\r\n\r\nexport default Chart","import React, { useContext, useEffect } from 'react'\r\nimport { Redirect, useParams } from 'react-router-dom'\r\nimport { Container, Grid, Paper, Typography } from '@material-ui/core'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\n\r\nimport { NavbarContext, FetchingContext, WeatherDataContext } from '../context'\r\nimport withData from '../hoc/withData'\r\n\r\nimport Chart from './Chart'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    temp: {\r\n        position: 'relative',\r\n        marginRight: '2rem',\r\n        '&>sup': {\r\n            position: 'absolute',\r\n            top: 0,\r\n            right: '-1rem'\r\n        }\r\n    },\r\n    center: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center'\r\n    },\r\n    image: {\r\n        width: 100,\r\n        height: 100,\r\n        borderRadius: '50%',\r\n        backgroundColor: theme.palette.primary.light\r\n    },\r\n    container: {\r\n        paddingTop: theme.spacing(2),\r\n        paddingBottom: theme.spacing(2),\r\n    },\r\n    paper: {\r\n        padding: theme.spacing(3),\r\n    },\r\n    cardHeader: {\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n        flexWrap: 'wrap',\r\n        '&>*:first-child': {\r\n            paddingRight: theme.spacing(2)\r\n        }\r\n    },\r\n}))\r\n\r\ntype Params = {\r\n    id: string\r\n}\r\n\r\nconst DayPage = () => {\r\n    const { weatherList } = useContext(WeatherDataContext)\r\n    const { endAnimation } = useContext(FetchingContext)\r\n    const { closeNavbar } = useContext(NavbarContext)\r\n    const { id } = useParams<Params>()\r\n    const classes = useStyles()\r\n\r\n    useEffect(() => {\r\n        closeNavbar!()\r\n        endAnimation!()\r\n\r\n        return () => {\r\n            closeNavbar!()\r\n        }\r\n    }, [])\r\n\r\n    const index = parseInt(id)\r\n\r\n    if (weatherList![index] === undefined) return <Redirect to=\"/\" />\r\n\r\n    const { day, description, hours, icon, temp, humidity, pressure } = weatherList![index][0]\r\n\r\n    return (\r\n        <Container className={classes.container}>\r\n            <Paper className={classes.paper}>\r\n                <div className={classes.cardHeader}>\r\n                    <Typography variant=\"h5\" component=\"h2\">\r\n                        {day} {hours}\r\n                    </Typography>\r\n                    <Typography variant=\"subtitle1\" component=\"div\">\r\n                        {description}\r\n                    </Typography>\r\n                </div>\r\n                <Grid className={classes.center} container>\r\n                    <Grid className={classes.center} item>\r\n                        <Typography className={classes.temp} variant=\"h2\" component=\"div\">\r\n                            {temp}\r\n                            <Typography variant=\"caption\" component=\"sup\">\r\n                                °C\r\n                            </Typography>\r\n                        </Typography>\r\n                    </Grid>\r\n                    <Grid className={classes.center} item>\r\n                        <img className={classes.image} src={`http://openweathermap.org/img/wn/${icon}@4x.png`} alt={description} />\r\n                    </Grid>\r\n                </Grid>\r\n                <Typography variant=\"subtitle1\" component=\"div\">\r\n                    Влажность: {humidity}%\r\n                    </Typography>\r\n                <Typography variant=\"subtitle1\" component=\"div\">\r\n                    Давление: {pressure} мм рт.\r\n                </Typography>\r\n            </Paper>\r\n            <Chart weatherList={weatherList![index]} />\r\n        </Container>\r\n    )\r\n}\r\n\r\nexport default withData(DayPage)","import React, { useContext, useState } from 'react'\r\nimport { makeStyles, fade } from '@material-ui/core/styles'\r\nimport { Menu, Search } from '@material-ui/icons'\r\nimport {\r\n    InputBase,\r\n    AppBar,\r\n    Toolbar,\r\n    Typography,\r\n    IconButton,\r\n} from '@material-ui/core'\r\n\r\nimport { NavbarContext, WeatherDataContext } from '../context'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        flexGrow: 1,\r\n    },\r\n    menuButton: {\r\n        marginRight: theme.spacing(2),\r\n    },\r\n    search: {\r\n        position: 'relative',\r\n        borderRadius: theme.shape.borderRadius,\r\n        backgroundColor: fade(theme.palette.common.white, 0.15),\r\n        '&:hover': {\r\n            backgroundColor: fade(theme.palette.common.white, 0.25),\r\n        },\r\n        width: '100%',\r\n        [theme.breakpoints.up('sm')]: {\r\n            marginLeft: theme.spacing(3),\r\n            width: 'auto',\r\n        },\r\n    },\r\n    searchIcon: {\r\n        padding: theme.spacing(0, 2),\r\n        height: '100%',\r\n        position: 'absolute',\r\n        pointerEvents: 'none',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n    },\r\n    inputRoot: {\r\n        color: 'inherit',\r\n        width: '100%'\r\n    },\r\n    inputInput: {\r\n        padding: theme.spacing(1, 1, 1, 0),\r\n        paddingLeft: `calc(1em + ${theme.spacing(4)}px)`,\r\n        transition: theme.transitions.create('width'),\r\n        width: '100%',\r\n        [theme.breakpoints.up('md')]: {\r\n            width: '20ch',\r\n        },\r\n    }\r\n}));\r\n\r\nconst Header = () => {\r\n    const [cityName, setCityName] = useState('')\r\n    const { currentPlace, setWeatherByCityName } = useContext(WeatherDataContext)\r\n    const { toggleNavbar } = useContext(NavbarContext)\r\n    const classes = useStyles()\r\n\r\n    const onChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        setCityName(e.target.value)\r\n    }\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <AppBar position=\"fixed\">\r\n                <Toolbar>\r\n                    <IconButton edge=\"start\" className={classes.menuButton} color=\"inherit\" aria-label=\"menu\" onClick={toggleNavbar!(true)}>\r\n                        <Menu />\r\n                    </IconButton>\r\n                    <div className={classes.search}>\r\n                        <div className={classes.searchIcon}>\r\n                            <Search />\r\n                        </div>\r\n                        <form onSubmit={setWeatherByCityName!(cityName)}>\r\n                            <InputBase\r\n                                onChange={onChange}\r\n                                value={cityName}\r\n                                placeholder={currentPlace!.length > 0 ? currentPlace : \"Search…\"}\r\n                                classes={{\r\n                                    root: classes.inputRoot,\r\n                                    input: classes.inputInput,\r\n                                }}\r\n                                inputProps={{ 'aria-label': 'search' }}\r\n                            />\r\n                        </form>\r\n                    </div>\r\n                </Toolbar>\r\n            </AppBar>\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nexport default Header","import React, { useContext } from 'react'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport {\r\n    Close,\r\n    NightsStayOutlined,\r\n    HomeOutlined,\r\n    WbSunnyOutlined,\r\n    Mail,\r\n    GitHub,\r\n    Telegram\r\n} from '@material-ui/icons'\r\nimport {\r\n    Button,\r\n    Divider,\r\n    Drawer,\r\n    BottomNavigation,\r\n    BottomNavigationAction,\r\n    ButtonGroup,\r\n    FormControlLabel,\r\n    Switch\r\n} from '@material-ui/core'\r\n\r\nimport { NavbarContext } from '../context/navbarContext'\r\nimport { DarkModeContext } from '../context'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    content: {\r\n        width: 260,\r\n    },\r\n    homeBtn: {\r\n        flex: 1\r\n    },\r\n    btnGroup: {\r\n        display: 'flex'\r\n    },\r\n    switchContainer: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'space-between',\r\n        marginRight: 0,\r\n        padding: '0 1rem',\r\n        transition: 'background-color ease 250ms',\r\n        '&:hover': {\r\n            backgroundColor: theme.palette.action.hover\r\n        }\r\n    },\r\n    switchInfo: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'space-between',\r\n        flex: 1\r\n    },\r\n    switchBtn: {\r\n        display: 'flex',\r\n        alignItems: 'center'\r\n    },\r\n    BottomNavigation: {\r\n        position: 'absolute',\r\n        bottom: 0,\r\n        left: 0,\r\n        right: 0,\r\n    },\r\n    BottomNavigationAction: {\r\n        minWidth: 60,\r\n        transition: 'background-color ease 250ms',\r\n        '&:hover': {\r\n            backgroundColor: theme.palette.action.hover\r\n        }\r\n    }\r\n}))\r\n\r\nconst Navbar = () => {\r\n    const history = useHistory()\r\n    const { isOpen, toggleNavbar } = useContext(NavbarContext)\r\n    const { isDarkMode, toggleDarkMode } = useContext(DarkModeContext)\r\n    const classes = useStyles()\r\n\r\n    const onHomeClick = (event: React.MouseEvent) => {\r\n        toggleNavbar!(false)(event)\r\n        history.push('/')\r\n    }\r\n\r\n    return (\r\n        <Drawer open={isOpen} onClose={toggleNavbar!(false)}>\r\n            <div className={classes.content}>\r\n                <ButtonGroup className={classes.btnGroup} variant=\"text\">\r\n                    <Button onClick={onHomeClick} className={classes.homeBtn} startIcon={<HomeOutlined />} >\r\n                        Home\r\n                    </Button>\r\n                    <Button onClick={toggleNavbar!(false)}>\r\n                        <Close />\r\n                    </Button>\r\n                </ButtonGroup>\r\n                <Divider />\r\n                <FormControlLabel\r\n                    className={classes.switchContainer}\r\n                    checked={isDarkMode}\r\n                    onChange={toggleDarkMode}\r\n                    label={<span className={classes.switchBtn}>{isDarkMode ? <NightsStayOutlined /> : <WbSunnyOutlined />}</span>}\r\n                    control={\r\n                        <Switch\r\n                            name=\"theme-switch\"\r\n                            color=\"default\"\r\n                        />\r\n                    }\r\n                />\r\n                <Divider />\r\n                <BottomNavigation className={classes.BottomNavigation} >\r\n                    <BottomNavigationAction\r\n                        className={classes.BottomNavigationAction}\r\n                        rel=\"noopener\"\r\n                        target=\"_blank\"\r\n                        href=\"mailto:alexandr.bulgatov13@gmail.com\"\r\n                        icon={<Mail />}\r\n                    />\r\n                    <BottomNavigationAction\r\n                        className={classes.BottomNavigationAction}\r\n                        rel=\"noopener\"\r\n                        target=\"_blank\"\r\n                        href=\"https://github.com/doyouwannatea/\"\r\n                        icon={<GitHub />}\r\n                    />\r\n                    <BottomNavigationAction\r\n                        className={classes.BottomNavigationAction}\r\n                        rel=\"noopener\"\r\n                        target=\"_blank\"\r\n                        href=\"https://t.me/doyouwannatea\"\r\n                        icon={<Telegram />}\r\n                    />\r\n                </BottomNavigation>\r\n            </div>\r\n        </Drawer>\r\n    )\r\n}\r\n\r\nexport default Navbar","import React, { useContext } from 'react'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport {\r\n    Grid,\r\n    Card,\r\n    CardActionArea,\r\n    CardContent,\r\n    Typography,\r\n    Theme,\r\n} from \"@material-ui/core\"\r\n\r\nimport { IWeatherListItem } from '../types'\r\nimport { FetchingContext } from '../context'\r\n\r\nconst useStyles = makeStyles<Theme, MakeStylesProps>((theme) => ({\r\n    root: {\r\n        borderRadius: 0,\r\n        marginBottom: 2,\r\n        opacity: ({ isAnimationEnds }) => isAnimationEnds ? 1 : 0,\r\n        animation: ({ isAnimationEnds }) => isAnimationEnds ? '' : 'bounceInLeft 800ms ease forwards',\r\n        animationDelay: ({ index }) => `${index * 100}ms`\r\n    },\r\n    content: {\r\n        position: 'relative',\r\n        paddingRight: 105,\r\n    },\r\n    weatherIconWrapper: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        marginRight: '1rem',\r\n    },\r\n    weatherIcon: {\r\n        width: 70,\r\n        height: 70,\r\n        borderRadius: '50%',\r\n        backgroundColor: theme.palette.primary.light\r\n    },\r\n    temp: {\r\n        minWidth: 50,\r\n        fontWeight: 100,\r\n        position: 'absolute',\r\n        right: 16,\r\n        top: '50%',\r\n        transform: 'translateY(-50%)'\r\n    },\r\n    title: {\r\n        [theme.breakpoints.down('xs')]: {\r\n            fontSize: 18\r\n        }\r\n    },\r\n    gridContainer: {\r\n        flexWrap: 'nowrap'\r\n    },\r\n    description: {\r\n        lineHeight: 1,\r\n        opacity: 0.9,\r\n        fontWeight: 100\r\n    }\r\n}))\r\n\r\ntype MakeStylesProps = {\r\n    index: number\r\n    isAnimationEnds: boolean | undefined\r\n}\r\n\r\ntype Props = {\r\n    index: number\r\n} & IWeatherListItem\r\n\r\nconst WeatherItem: React.FC<Props> = ({ day, icon, description, temp, index }) => {\r\n    const { isAnimationEnds } = useContext(FetchingContext)\r\n    const history = useHistory()\r\n    const classes = useStyles({ index, isAnimationEnds })\r\n\r\n    const clickHandler = () => {\r\n        history.push(`/${index}`)\r\n    }\r\n\r\n    return (\r\n        <Card className={classes.root}>\r\n            <CardActionArea onClick={clickHandler}>\r\n                <CardContent className={classes.content}>\r\n                    <Grid className={classes.gridContainer} container>\r\n                        <Grid item className={classes.weatherIconWrapper}>\r\n                            <img src={`http://openweathermap.org/img/wn/${icon}@4x.png`} alt={description} className={classes.weatherIcon} />\r\n                        </Grid>\r\n                        <Grid item>\r\n                            <Typography className={classes.title} variant=\"h5\" component=\"div\">\r\n                                {day}\r\n                            </Typography>\r\n                            <Typography className={classes.description} variant=\"subtitle1\" component=\"div\">\r\n                                {description}\r\n                            </Typography>\r\n                        </Grid>\r\n                        <Typography className={classes.temp} variant=\"h4\" component=\"div\">\r\n                            {temp}°С\r\n                        </Typography>\r\n                    </Grid>\r\n                </CardContent>\r\n            </CardActionArea>\r\n        </Card>\r\n    )\r\n}\r\n\r\nexport default WeatherItem","import React, { useContext } from 'react'\r\n\r\nimport { WeatherDataContext } from '../context'\r\nimport withData from '../hoc/withData'\r\n\r\nimport WeatherItem from './WeatherItem'\r\n\r\nconst WeatherList = () => {\r\n    const { weatherList } = useContext(WeatherDataContext)\r\n\r\n    return (\r\n        <div className=\"weather-wrapper\">\r\n            {\r\n                weatherList!.map((day, index) => (\r\n                    <WeatherItem key={day[0].dtText} index={index} {...day[0]} />\r\n                ))\r\n            }\r\n        </div>\r\n    )\r\n}\r\nexport default withData(WeatherList)","import React, { useEffect, useState } from 'react'\r\nimport { createMuiTheme, CssBaseline, ThemeProvider } from '@material-ui/core'\r\nimport { BrowserRouter as Router, Switch, Route, Redirect } from 'react-router-dom'\r\n\r\nimport { IError, IWeatherData } from '../types'\r\nimport WeatherService from '../apis/WeatherService'\r\nimport counter from '../apis/send'\r\nimport {\r\n  NavbarContext,\r\n  DarkModeContext,\r\n  FetchingContext,\r\n  WeatherDataContext\r\n} from '../context'\r\n\r\nimport DayPage from './DayPage'\r\nimport Header from './Header'\r\nimport Navbar from './Navbar'\r\nimport WeatherList from './WeatherList'\r\n\r\nconst enterSiteTime = Date.now()\r\n\r\nwindow.addEventListener('beforeunload', () => {\r\n  counter.send('время пользователя на сайте', Date.now() - enterSiteTime)\r\n  counter.send('количество кликов по бургер-меню', counter.getCounterValue('количество кликов по бургер-меню'))\r\n  counter.send('количество просмотренных прогнозов погоды', counter.getCounterValue('количество просмотренных прогнозов погоды'))\r\n})\r\n\r\nconst App = () => {\r\n  const [isOpen, setIsOpen] = useState(false)\r\n  const [isDarkMode, setIsDarkMode] = useState(false)\r\n  const [weatherData, setWeatherData] = useState<IWeatherData>({ weatherList: [], name: '' })\r\n  const [isLoading, setIsLoading] = useState(false)\r\n  const [isAnimationEnds, setIsAnimationEnds] = useState(false)\r\n  const [error, setError] = useState<IError>({ isError: false, message: '' })\r\n\r\n  const { name, weatherList } = weatherData\r\n\r\n  useEffect(() => {\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    if (navigator.geolocation) {\r\n      setIsLoading(true)\r\n      navigator.geolocation.getCurrentPosition(({ coords }) => {\r\n        WeatherService.fetchWeatherByCoords(coords.latitude, coords.longitude)\r\n          .then(setWeatherData)\r\n          .catch(catchWeatherAPIError)\r\n          .finally(() => setIsLoading(false))\r\n      }, catchPositionError)\r\n    } else {\r\n      onError('Геолокация недоступна, введите город вручную.')\r\n    }\r\n  }, [])\r\n\r\n  const onError = (message: string) => {\r\n    setError({\r\n      isError: true,\r\n      message\r\n    })\r\n  }\r\n\r\n  const resetError = () => {\r\n    setError({\r\n      isError: false,\r\n      message: ''\r\n    })\r\n  }\r\n\r\n  const resetWeatherData = () => {\r\n    setWeatherData({\r\n      name: '',\r\n      weatherList: []\r\n    })\r\n  }\r\n\r\n  const catchPositionError = (err: GeolocationPositionError) => {\r\n    switch (err.code) {\r\n      case 1:\r\n        onError('Геолокация выключена, введите местоположение вручную.')\r\n        break\r\n      case 2:\r\n        onError('Не удалось получить геолокацию.')\r\n        break\r\n      default:\r\n        onError('Ошибка сети или сервера.')\r\n        break\r\n    }\r\n  }\r\n\r\n  const catchWeatherAPIError = (err: Error) => {\r\n    switch (err.message) {\r\n      case '404':\r\n        onError('Город не найден.')\r\n        break\r\n      case '429':\r\n        onError('Слишком много запросов в минуту.')\r\n        break\r\n      default:\r\n        onError('Ошибка сети или сервера.')\r\n        break\r\n    }\r\n    resetWeatherData()\r\n  }\r\n\r\n  const setWeatherByCityName = (city: string) => (e: React.FormEvent) => {\r\n    e.preventDefault()\r\n    if (city.length > 0) {\r\n      setIsAnimationEnds(false)\r\n      document.querySelector('input')?.blur()\r\n      resetError()\r\n      setIsLoading(true)\r\n      WeatherService.fetchWeatherByCityName(city)\r\n        .then(setWeatherData)\r\n        .catch(catchWeatherAPIError)\r\n        .finally(() => setIsLoading(false))\r\n    }\r\n  }\r\n\r\n  const toggleNavbar = (open: boolean) => (\r\n    event: React.KeyboardEvent | React.MouseEvent,\r\n  ) => {\r\n    if (\r\n      event.type === 'keydown' &&\r\n      ((event as React.KeyboardEvent).key === 'Tab' ||\r\n        (event as React.KeyboardEvent).key === 'Shift')\r\n    ) {\r\n      return\r\n    }\r\n\r\n    counter.increase('количество кликов по бургер-меню')\r\n    setIsOpen(open)\r\n  }\r\n\r\n  const closeNavbar = () => setIsOpen(false)\r\n\r\n  const toggleDarkMode = () => setIsDarkMode(prevState => !prevState)\r\n\r\n  const endAnimation = () => setIsAnimationEnds(true)\r\n\r\n  const theme = React.useMemo(\r\n    () =>\r\n      createMuiTheme({\r\n        palette: {\r\n          type: isDarkMode ? 'dark' : 'light',\r\n        },\r\n      }),\r\n    [isDarkMode],\r\n  )\r\n\r\n  return (\r\n    <ThemeProvider theme={theme}>\r\n      <NavbarContext.Provider value={{ isOpen, toggleNavbar, closeNavbar }} >\r\n        <DarkModeContext.Provider value={{ isDarkMode, toggleDarkMode }}>\r\n          <FetchingContext.Provider value={{ error, isLoading, endAnimation, isAnimationEnds }}>\r\n            <WeatherDataContext.Provider value={{ setWeatherByCityName, currentPlace: name, weatherList }}>\r\n              <CssBaseline />\r\n              <Router>\r\n                <Header />\r\n                <Navbar />\r\n                <Switch>\r\n                  <Route path=\"/\" component={WeatherList} exact />\r\n                  <Route path=\"/:id\" component={DayPage} exact />\r\n                  <Route path=\"*\">\r\n                    <Redirect to=\"/\" />\r\n                  </Route>\r\n                </Switch>\r\n              </Router>\r\n            </WeatherDataContext.Provider>\r\n          </FetchingContext.Provider>\r\n        </DarkModeContext.Provider>\r\n      </NavbarContext.Provider>\r\n    </ThemeProvider>\r\n  )\r\n}\r\n\r\nexport default App","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\n\r\nimport App from './components/App'\r\n\r\nimport './index.css'\r\n\r\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}